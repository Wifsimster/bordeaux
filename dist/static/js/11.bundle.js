(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{46:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"min-w:full sm:min-w:sm"},[s("div",{staticClass:"text:white text:3/2"},[e._v("\n    Plex\n    "),e.isConnected?s("span",{staticClass:"inline-block rounded:full bg:green ml:1/4 p:1/3 align:middle"}):s("span",{staticClass:"inline-block rounded:full bg:red ml:1/4 p:1/3 align:middle"})]),e._v(" "),s("div",{staticClass:"text:grey-dark"},[e._v("\n    Used to get your collected and watched episodes.\n  ")]),e._v(" "),e.error?s("alert",{attrs:{color:"red"}},[e._v(e._s(e.error))]):e._e(),e._v(" "),e.settings?s("div",[s("transition",{attrs:{name:"fade"}},[e.isConnected?s("div",{staticClass:"pt:2"},[e._v("\n        Connected as "+e._s(this.settings.username)+"\n        "),s("btn",{staticClass:"ml:1",on:{click:function(t){return e.reset()}}},[e._v("Signout")])],1):s("div",[s("div",{staticClass:"relative my:3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.username,expression:"settings.username"}],attrs:{id:"plex_username",placeholder:"Eliot"},domProps:{value:e.settings.username},on:{input:function(t){t.target.composing||e.$set(e.settings,"username",t.target.value)}}}),e._v(" "),s("label",{attrs:{for:"plex_username"}},[e._v("Username")])]),e._v(" "),s("div",{staticClass:"relative my:3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.encryptedPassword,expression:"encryptedPassword"}],attrs:{id:"plex_password",type:"password",placeholder:"M3gA_Pa22w0rD!"},domProps:{value:e.encryptedPassword},on:{input:function(t){t.target.composing||(e.encryptedPassword=t.target.value)}}}),e._v(" "),s("label",{attrs:{for:"plex_password"}},[e._v("Password")])]),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.debouncing?s("div",[e._v("Connecting ...")]):e._e()])],1)]),e._v(" "),s("div",{staticClass:"relative my:3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.synchronizeAfterTransfert,expression:"settings.synchronizeAfterTransfert"}],attrs:{id:"synchronizeAfterTransfert",type:"checkbox"},domProps:{checked:Array.isArray(e.settings.synchronizeAfterTransfert)?e._i(e.settings.synchronizeAfterTransfert,null)>-1:e.settings.synchronizeAfterTransfert},on:{change:function(t){var s=e.settings.synchronizeAfterTransfert,n=t.target,i=!!n.checked;if(Array.isArray(s)){var r=e._i(s,null);n.checked?r<0&&e.$set(e.settings,"synchronizeAfterTransfert",s.concat([null])):r>-1&&e.$set(e.settings,"synchronizeAfterTransfert",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.settings,"synchronizeAfterTransfert",i)}}}),e._v(" "),s("label",{attrs:{for:"synchronizeAfterTransfert"}},[e._v("Synchronize after transfert")])])],1):e._e()],1)};n._withStripped=!0;var i=s(2),r=s(27),a=s.n(r),o={name:"Plex",computed:{message:function(){return this.$store.getters["webSocket/message"]},isConnected:function(){return this.settings&&this.settings.token},encryptedPassword:{get:function(){if(this.settings.password)try{return a.a.AES.decrypt(this.settings.password,"67d119bc-e8ae-45ff-8cf3-0fc876576a6a").toString(a.a.enc.Utf8)}catch(e){console.warn("[Plex] Password cannot be decrypt : ".concat(e))}return null},set:function(e){e?this.$set(this.settings,"password",a.a.AES.encrypt(e,"67d119bc-e8ae-45ff-8cf3-0fc876576a6a").toString()):this.settings.password=""}}},data:function(){return{error:null,settings:null,timeout:null,debouncing:!1}},created:function(){this.getAll()},watch:{isConnected:function(e){this.$emit("is-valid",e)},"settings.username":function(e,t){var s=this;this.update(),void 0!==t&&this.debounce((function(){s.signin()}),2e3)},"settings.password":function(e,t){var s=this;this.update(),void 0!==t&&this.debounce((function(){s.signin()}),2e3)},"settings.synchronizeAfterTransfert":function(){this.update()},message:function(e){if("plex"===e.object)switch(this.error=null,e.method){case"getAll":case"update":e.error?this.error=e.error:this.settings=Object.assign({},e.results);break;case"signin":e.error?this.$emit("is-valid",!1):this.getAll();break;default:console.log("Unknow method : ".concat(e.method))}}},methods:{debounce:function(e,t){var s=this;this.debouncing=!0,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.apply(s),s.debouncing=!1}),t)},reset:function(){this.settings.username=null,this.settings.password=null,this.settings.token=null,this.update()},getAll:function(){this.$store.commit("webSocket/send",{object:"plex",method:"getAll"})},update:function(){Object(i.b)(this.settings)||this.$store.commit("webSocket/send",{object:"plex",method:"update",params:this.settings})},signin:function(){this.settings&&this.settings.password&&this.settings.password.length>3&&this.$store.commit("webSocket/send",{object:"plex",method:"signin",params:{uuid:"67d119bc-e8ae-45ff-8cf3-0fc876576a6a"}})}}},c=s(0),l=Object(c.a)(o,n,[],!1,null,null,null);l.options.__file="src/components/settings/plex.vue";t.default=l.exports}}]);
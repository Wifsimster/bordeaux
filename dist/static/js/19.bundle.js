(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{79:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p:1"},[e.error?s("alert",{attrs:{color:"red"}},[e._v(e._s(e.error))]):e._e(),e._v(" "),e.isLoading?s("loader",{attrs:{message:e.loadingMessage}}):e._e(),e._v(" "),e.isLoading?e._e():s("div",[e.success?s("alert",{attrs:{color:"green"}},[s("p",[e._v("Files transfert with success :)")])]):e._e(),e._v(" "),e.hasEpisodes?s("div",{staticClass:"sm:none flex:col"},e._l(e.episodes,(function(t){return s("div",{key:t.directory,staticClass:"flex flex:wrap justify:between"},[s("div",[e._v(e._s(t.destination.filename))]),e._v(" "),s("div",[t.loading?s("loader"):e._e(),e._v(" "),t.transfered?s("span",{staticClass:"text:green"},[e._v("Done")]):e._e()],1)])})),0):e._e(),e._v(" "),e.hasEpisodes?s("div",{staticClass:"none sm:block"},[s("table",{staticClass:"border:collapse w:full"},[e._m(0),e._v(" "),s("tbody",e._l(e.episodes,(function(t){return s("tr",{key:t.directory,staticClass:"hover:bg:grey-darker"},[s("td",[e._v(e._s(t.origin.file))]),e._v(" "),s("td",[e._v(e._s(t.destination.path))]),e._v(" "),s("td",{staticClass:"text:center"},[t.loading?s("loader"):e._e(),e._v(" "),t.transfered?s("span",{staticClass:"text:green"},[e._v("Done")]):e._e()],1)])})),0)])]):s("div",{staticClass:"text:center"},[e._v("No espiode found :(")])],1),e._v(" "),e.isLoading?e._e():s("div",{staticClass:"flex w:full justify:center mt:1"},[s("btn",{staticClass:"mr:1",on:{click:function(t){return e.search()}}},[e._v("Scan")]),e._v(" "),e.hasEpisodes?s("btn",{on:{click:function(t){return e.transfert()}}},[e._v("Transfert")]):e._e()],1)],1)};i._withStripped=!0;var r={name:"Transfert",computed:{hasEpisodes:function(){return this.episodes&&this.episodes.length>0},hasNoEpisode:function(){return this.episodes&&0===this.episodes.length},message:function(){return this.$store.getters["webSocket/message"]}},data:function(){return{error:null,episodes:null,success:null,isLoading:!1,loadingMessage:null,subtitlesSettings:null}},created:function(){this.getSubtitlesSettings(),this.search()},watch:{message:function(e){var t=this;switch(e.object){case"transfert":switch(e.method){case"search":this.isLoading=!1,e.error?this.error=e.error:this.episodes=Object.assign([],e.results);break;case"move":e.error?console.error(error):this.episodes.map((function(s,i){e.params.episode.origin.path===s.origin.path&&(t.getSubtitle(e.params.episode.destination.path),t.$set(t.episodes,i,Object.assign(s,{loading:!1,transfered:!0})))}))}break;case"plex":switch(e.method){case"refresh":e.error?(console.error(e.error),this.$store("notification/add",{message:"Error when refreshing Plex library !",type:"error"})):console.log("[Plex] Refresh Tv Shows...")}break;case"subtitles":switch(e.method){case"getAll":e.error?this.error=e.error:this.subtitlesSettings=e.results}}}},methods:{search:function(){this.isLoading=!0,this.loadingMessage="Searching new files...",this.$store.commit("webSocket/send",{object:"transfert",method:"search"})},transfert:function(){var e=this;this.episodes&&(this.episodes.map((function(t,s){e.move(t,s)})),this.refreshPlex())},move:function(e,t){this.$set(this.episodes,t,Object.assign(e,{loading:!0})),this.$store.commit("webSocket/send",{object:"transfert",method:"move",params:{episode:e}})},refreshPlex:function(){this.$store.commit("webSocket/send",{object:"plex",method:"refresh",params:{uuid:"67d119bc-e8ae-45ff-8cf3-0fc876576a6a"}})},getSubtitlesSettings:function(){this.$store.commit("webSocket/send",{object:"subtitles",method:"getAll"})},getSubtitle:function(e){this.subtitlesSettings&&this.subtitlesSettings.downloadAfterTransfert&&this.$store.commit("webSocket/send",{object:"subtitles",method:"getSubtitle",params:{file:e}})}}},o=s(0),n=Object(o.a)(r,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Episode found")]),this._v(" "),t("th",[this._v("Episode destination")]),this._v(" "),t("th",[this._v("Status")])])])}],!1,null,null,null);n.options.__file="src/pages/Transfert.vue";t.default=n.exports}}]);